Content-Length: 749

{"jsonrpc":"2.0","id":"1","method":"initialize","params":{"processId":36444,"rootPath":"/Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/","rootUri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/","capabilities":{"workspace":{"applyEdit":true,"symbol":{},"executeCommand":{"dynamicRegistration":true},"workspaceFolders":true},"textDocument":{"synchronization":{"willSave":true,"willSaveWaitUntil":true,"didSave":true},"completion":{"completionItem":{"snippetSupport":true}},"hover":{},"signatureHelp":{},"references":{},"documentHighlight":{},"documentSymbol":{},"formatting":{},"rangeFormatting":{},"definition":{},"codeAction":{},"codeLens":{},"documentLink":{},"rename":{}}},"clientName":"Eclipse SDK","trace":"off"}}Content-Length: 52

{"jsonrpc":"2.0","method":"initialized","params":{}}Content-Length: 5434

{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/main.p4","languageId":"p4","version":1,"text":"/* -*- P4_16 -*- */\n#include \u003ccore.p4\u003e\n#include \u003cv1model.p4\u003e\n\nconst bit\u003c16\u003e TYPE_IPV4 \u003d 0x800;\n\n/*************************************************************************\n*********************** H E A D E R S  ***********************************\n*************************************************************************/\n\ntypedef bit\u003c9\u003e  egressSpec_t;\ntypedef bit\u003c48\u003e macAddr_t;\ntypedef bit\u003c32\u003e ip4Addr_t;\n\nheader ethernet_t {\n    macAddr_t dstAddr;\n    macAddr_t srcAddr;\n    bit\u003c16\u003e   etherType;\n}\n\nheader ipv4_t {\n    bit\u003c4\u003e    version;\n    bit\u003c4\u003e    ihl;\n    bit\u003c8\u003e    diffserv;\n    bit\u003c16\u003e   totalLen;\n    bit\u003c16\u003e   identification;\n    bit\u003c3\u003e    flags;\n    bit\u003c13\u003e   fragOffset;\n    bit\u003c8\u003e    ttl;\n    bit\u003c8\u003e    protocol;\n    bit\u003c16\u003e   hdrChecksum;\n    ip4Addr_t srcAddr;\n    ip4Addr_t dstAddr;\n}\n\nstruct metadata {\n    /* empty */\n}\n\nstruct headers {\n    ethernet_t   ethernet;\n    ipv4_t       ipv4;\n}\n\n/*************************************************************************\n*********************** P A R S E R  ***********************************\n*************************************************************************/\n\nparser MyParser(packet_in packet,\n                out headers hdr,\n                inout metadata meta,\n                inout standard_metadata_t standard_metadata) {\n\n    state start {\n        transition parse_ethernet;\n    }\n\n    state parse_ethernet {\n        packet.extract(hdr.ethernet);\n        transition select(hdr.ethernet.etherType) {\n            TYPE_IPV4: parse_ipv4;\n            default: accept;\n        }\n    }\n\n    state parse_ipv4 {\n        packet.extract(hdr.ipv4);\n        transition accept;\n    }\n\n}\n\n/*************************************************************************\n************   C H E C K S U M    V E R I F I C A T I O N   *************\n*************************************************************************/\n\ncontrol MyVerifyChecksum(inout headers hdr, inout metadata meta) {\n    apply {  }\n}\n\n\n/*************************************************************************\n**************  I N G R E S S   P R O C E S S I N G   *******************\n*************************************************************************/\n\ncontrol MyIngress(inout headers hdr,\n                  inout metadata meta,\n                  inout standard_metadata_t standard_metadata) {\n    action drop() {\n        mark_to_drop();\n    }\n\n    action ipv4_forward(macAddr_t dstAddr, egressSpec_t port) {\n        standard_metadata.egress_spec \u003d port;\n        hdr.ethernet.srcAddr \u003d hdr.ethernet.dstAddr;\n        hdr.ethernet.dstAddr \u003d dstAddr;\n        hdr.ipv4.ttl \u003d hdr.ipv4.ttl - 1;\n    }\n\n    table ipv4_lpm {\n        key \u003d {\n            hdr.ipv4.dstAddr: lpm;\n        }\n        actions \u003d {\n            ipv4_forward;\n            drop;\n            NoAction;\n        }\n        size \u003d 1024;\n        default_action \u003d drop();\n    }\n\n    apply {\n        if (hdr.ipv4.isValid()) {\n            ipv4_lpm.apply();\n        }\n    }\n}\n\n/*************************************************************************\n****************  E G R E S S   P R O C E S S I N G   *******************\n*************************************************************************/\n\ncontrol MyEgress(inout headers hdr,\n                 inout metadata meta,\n                 inout standard_metadata_t standard_metadata) {\n    apply {  }\n}\n\n/*************************************************************************\n*************   C H E C K S U M    C O M P U T A T I O N   **************\n*************************************************************************/\n\ncontrol MyComputeChecksum(inout headers  hdr, inout metadata meta) {\n     apply {\n        update_checksum(\n            hdr.ipv4.isValid(),\n            { hdr.ipv4.version,\n              hdr.ipv4.ihl,\n              hdr.ipv4.diffserv,\n              hdr.ipv4.totalLen,\n              hdr.ipv4.identification,\n              hdr.ipv4.flags,\n              hdr.ipv4.fragOffset,\n              hdr.ipv4.ttl,\n              hdr.ipv4.protocol,\n              hdr.ipv4.srcAddr,\n              hdr.ipv4.dstAddr },\n            hdr.ipv4.hdrChecksum,\n            HashAlgorithm.csum16);\n    }\n}\n\n/*************************************************************************\n***********************  D E P A R S E R  *******************************\n*************************************************************************/\n\ncontrol MyDeparser(packet_out packet, in headers hdr) {\n    apply {\n        packet.emit(hdr.ethernet);\n        packet.emit(hdr.ipv4);\n    }\n}\n\n/*************************************************************************\n***********************  S W I T C H  *******************************\n*************************************************************************/\n\nV1Switch(\nMyParser(),\nMyVerifyChecksum(),\nMyIngress(),\nMyEgress(),\nMyComputeChecksum(),\nMyDeparser()\n) main;\n"}}}Content-Length: 174

{"jsonrpc":"2.0","id":"2","method":"textDocument/documentSymbol","params":{"textDocument":{"uri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/main.p4"}}}Content-Length: 215

{"jsonrpc":"2.0","id":"3","method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/main.p4"},"position":{"line":21,"character":21}}}Content-Length: 215

{"jsonrpc":"2.0","id":"4","method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/main.p4"},"position":{"line":21,"character":21}}}Content-Length: 297

{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"version":2,"uri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/main.p4"},"contentChanges":[{"range":{"start":{"line":21,"character":14},"end":{"line":21,"character":21}},"rangeLength":7,"text":""}]}}Content-Length: 174

{"jsonrpc":"2.0","id":"5","method":"textDocument/documentSymbol","params":{"textDocument":{"uri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/main.p4"}}}Content-Length: 215

{"jsonrpc":"2.0","id":"6","method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/main.p4"},"position":{"line":21,"character":14}}}Content-Length: 304

{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"version":3,"uri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/main.p4"},"contentChanges":[{"range":{"start":{"line":21,"character":14},"end":{"line":21,"character":14}},"rangeLength":0,"text":"version"}]}}Content-Length: 174

{"jsonrpc":"2.0","id":"7","method":"textDocument/documentSymbol","params":{"textDocument":{"uri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/main.p4"}}}Content-Length: 215

{"jsonrpc":"2.0","id":"8","method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/main.p4"},"position":{"line":21,"character":21}}}Content-Length: 159

{"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/dmakarov/work/try/wtests/runtime-p4lang/p4lsd-test/main.p4"}}}Content-Length: 60

{"jsonrpc":"2.0","id":"9","method":"shutdown","params":null}Content-Length: 47

{"jsonrpc":"2.0","method":"exit","params":null}
